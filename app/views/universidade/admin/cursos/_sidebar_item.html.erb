<%
  is_active = local_assigns[:current_curso]&.id == curso.id
  modulos_count = curso.modulos.count
  trilhas_count = Universidade::Trilha.joins(:modulo).where(universidade_modulos: { curso_id: curso.id }).count
%>
<li id="sidebar_curso_<%= curso.id %>">
  <%= link_to admin_curso_path(curso),
        data: {
          turbo_frame: "main_panel",
          action: "click->sidebar#select",
          sidebar_active: is_active ? "true" : nil
        },
        class: "block px-3 py-2.5 hover:bg-gray-50 transition-colors cursor-pointer" do %>
    <div class="flex items-start gap-2.5">
      <span class="mt-1.5 flex-shrink-0 w-2 h-2 rounded-full
                   <%= curso.visivel? ? 'bg-green-400' : 'bg-gray-300' %>"></span>
      <div class="flex-1 min-w-0">
        <p class="text-sm font-medium text-gray-800 truncate leading-snug"><%= curso.nome %></p>
        <p class="text-xs text-gray-400 mt-0.5">
          <%= modulos_count %> módulo<%= modulos_count == 1 ? '' : 's' %> ·
          <%= trilhas_count %> trilha<%= trilhas_count == 1 ? '' : 's' %>
        </p>
      </div>
    </div>
  <% end %>
</li>
